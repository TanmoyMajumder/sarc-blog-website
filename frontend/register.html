<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>NITA Blog | Register</title>

  <!-- Tailwind (DEV ONLY) -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Icons -->
  <link
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    rel="stylesheet"
  />

  <style>
    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .fade-up { animation: fadeUp 0.8s ease-out forwards; }
  </style>
</head>

<body class="bg-white font-sans text-slate-800 overflow-x-hidden">

<!-- Decorative background -->
<div class="absolute -top-32 right-[-20%] w-[70%] h-[700px] bg-blue-50 rounded-full blur-3xl -z-10"></div>

<!-- ================= HEADER ================= -->
<header class="max-w-7xl mx-auto px-6 py-6 flex justify-between items-center">
  <div class="flex gap-4 items-center">
    <img src="assets/logo1.jpeg" class="h-14 md:h-16" />
    <img src="assets/logo 2.jpeg" class="h-14 md:h-16" />
  </div>

  <div class="flex gap-3">
    <a href="login.html"
       class="px-5 py-1.5 rounded-full border border-[#C5A059]
              text-[#C5A059] text-sm font-medium
              hover:bg-[#C5A059] hover:text-white hover:shadow-md hover:-translate-y-[1px]
              transition-all duration-300">
      Log in
    </a>

    <a href="index.html"
       class="px-5 py-1.5 rounded-full border border-[#C5A059]
              text-[#C5A059] text-sm font-medium
              hover:bg-[#C5A059] hover:text-white hover:shadow-md hover:-translate-y-[1px]
              transition-all duration-300">
      Home
    </a>
  </div>
</header>

<!-- ================= MAIN ================= -->
<main class="max-w-7xl mx-auto px-6 py-20 flex justify-center">
  <div class="w-full max-w-md bg-white border border-[#C5A059]/30 rounded-3xl p-8 md:p-10 shadow-2xl fade-up">

    <h1 class="text-3xl font-bold text-[#333] mb-1">Create Account</h1>
    <p class="text-slate-500 mb-6">Join the SARC Blog community</p>

    <!-- SUCCESS MESSAGE -->
    <p id="register-success"
       class="hidden mb-4 text-sm text-green-600 bg-green-50 border border-green-200 px-4 py-2 rounded-lg">
      ✅ Account created successfully. Please log in.
    </p>

    <!-- ERROR MESSAGE -->
    <p id="register-error"
       class="mb-4 text-sm text-red-500"></p>

    <!-- FORM -->
    <form class="space-y-5" onsubmit="handleRegister(event)">

      <input
        id="reg-name"
        type="text"
        placeholder="Full name"
        required
        class="w-full px-4 py-3 rounded-xl border border-slate-200
               focus:border-[#C5A059] focus:ring-4 focus:ring-[#C5A059]/10
               outline-none transition"
      />

      <input
        id="reg-email"
        type="email"
        placeholder="Email address"
        required
        class="w-full px-4 py-3 rounded-xl border border-slate-200
               focus:border-[#C5A059] focus:ring-4 focus:ring-[#C5A059]/10
               outline-none transition"
      />

      <input
        id="reg-password"
        type="password"
        placeholder="Create password"
        required
        class="w-full px-4 py-3 rounded-xl border border-slate-200
               focus:border-[#C5A059] focus:ring-4 focus:ring-[#C5A059]/10
               outline-none transition"
      />

      <button
        type="submit"
        class="w-full py-3 rounded-full border-2 border-[#C5A059]
               text-[#C5A059] font-semibold tracking-wide
               hover:bg-[#C5A059] hover:text-white hover:shadow-xl
               transition-all duration-300">
        Sign up
      </button>
    </form>

    <!-- OR DIVIDER -->
    <div class="flex items-center gap-3 my-6">
      <div class="flex-1 h-px bg-slate-200"></div>
      <span class="text-xs text-slate-400">OR</span>
      <div class="flex-1 h-px bg-slate-200"></div>
    </div>

    <!-- GOOGLE SIGN UP -->
    <a href="http://localhost:5000/api/v1/auth/google"
       class="w-full flex items-center justify-center gap-3 py-3 rounded-full
              border border-slate-300 text-slate-700 font-medium
              hover:bg-slate-50 hover:shadow-md transition-all duration-300">

      <img
        src="https://developers.google.com/identity/images/g-logo.png"
        alt="Google"
        class="h-5 w-5"
      />

      Continue with Google
    </a>

    <p class="text-sm text-center text-slate-500 mt-6">
      Already have an account?
      <a href="login.html" class="text-[#C5A059] font-semibold hover:underline">
        Log in
      </a>
    </p>
  </div>
</main>

<!-- ================= FOOTER ================= -->
<footer class="bg-[#1B2129] text-slate-300 text-sm py-6 text-center">
  © 2025 SARC NIT Agartala
</footer>

<!-- ================= AUTH SCRIPT ================= -->
<script type="module">
  import { apiFetch } from "./js/api.js";

  window.handleRegister = async function (e) {
    e.preventDefault();

    const name = document.getElementById("reg-name").value.trim();
    const email = document.getElementById("reg-email").value.trim();
    const password = document.getElementById("reg-password").value;

    const errorEl = document.getElementById("register-error");
    const successEl = document.getElementById("register-success");

    errorEl.textContent = "";
    successEl.classList.add("hidden");

    try {
const data = await apiFetch("/auth/register", {
  method: "POST",
  body: JSON.stringify({ name, email, password })
});

// show OTP sent message
successEl.textContent = "✅ OTP sent to your email. Please verify.";
successEl.classList.remove("hidden");

// save email for OTP page
localStorage.setItem("pendingEmail", email);

// short delay so user sees the message
setTimeout(() => {
  window.location.href = "verify-otp.html";
}, 500);


    } catch (err) {
      errorEl.textContent = err.message;
    }
  };
</script>

</body>
</html>
